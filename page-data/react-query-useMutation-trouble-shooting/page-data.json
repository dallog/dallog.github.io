{"componentChunkName":"component---src-templates-post-jsx","path":"/react-query-useMutation-trouble-shooting/","result":{"data":{"site":{"siteMetadata":{"title":"dal.log"}},"markdownRemark":{"id":"c7bea043-345c-5f78-ae53-796a83812961","excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” ë‹¬ë¡íŒ€ í¬ë£¨ ë‚˜ì¸ì´ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ë‹¬ë¡ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë˜ë„ì¤‘ ì˜ˆìƒí•˜ì§€ ëª»í•œ ì—ëŸ¬ê°€ ë°œìƒí–ˆì–´ìš”. ë‹¬ë¡ì—ì„œëŠ” ë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.\nì„ í™œìš©í•˜ì—¬ ë°ì´í„°ì˜ ë³€ê²½ì„ ì¼ìœ¼í‚¤ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ìˆì£ !\n(ì˜ˆë¥¼ë“¤ë©´  ê°™ì€ ì‘ì—…ë“¤ì´ ìˆê² ì£ .) ğŸ¤¦â€â™‚ï¸ ê·¸ëŸ°ë° ê°„í—ì ìœ¼ë¡œ ë°ì´í„°ê°€ ë³€ê²½(delete,patch,post)ëœ í›„ ë‹¤ì‹œ ë°ì´í„°ë¥¼ ê°±ì‹ (get)í•˜ëŠ” ì‘ì—…â€¦","html":"<blockquote>\n<p>ì´ ê¸€ì€ ìš°í…Œì½” ë‹¬ë¡íŒ€ í¬ë£¨ <a href=\"https://github.com/jhy979\">ë‚˜ì¸</a>ì´ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.</p>\n</blockquote>\n<img src='https://velog.velcdn.com/images/jhy979/post/60cffbe1-a0bb-4f53-aa8f-e08ee092d038/image.png'>\n<blockquote>\n<p>ë‹¬ë¡ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë˜ë„ì¤‘ ì˜ˆìƒí•˜ì§€ ëª»í•œ ì—ëŸ¬ê°€ ë°œìƒí–ˆì–´ìš”.</p>\n</blockquote>\n<p>ë‹¬ë¡ì—ì„œëŠ” <code class=\"language-text\">react-query</code>ë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n<code class=\"language-text\">useMutation</code>ì„ í™œìš©í•˜ì—¬ ë°ì´í„°ì˜ ë³€ê²½ì„ ì¼ìœ¼í‚¤ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ìˆì£ !\n(ì˜ˆë¥¼ë“¤ë©´ <code class=\"language-text\">Delete, Patch, Post</code> ê°™ì€ ì‘ì—…ë“¤ì´ ìˆê² ì£ .)</p>\n<p>ğŸ¤¦â€â™‚ï¸ ê·¸ëŸ°ë° ê°„í—ì ìœ¼ë¡œ ë°ì´í„°ê°€ ë³€ê²½(delete,patch,post)ëœ í›„ ë‹¤ì‹œ ë°ì´í„°ë¥¼ ê°±ì‹ (get)í•˜ëŠ” ì‘ì—…ì—ì„œ ë³€ê²½ëœ ë°ì´í„°ê°€ ë“¤ì–´ì˜¤ì§€ ì•ŠëŠ” ì´ìŠˆê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>\n<p>ë”ìš± ë” ë¬¸ì œëŠ” Macì„ ì‚¬ìš©í•˜ëŠ” ì‚¬ìš©ìë“¤ì€ ì´ëŸ° ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ëŠ”ë° Window ì´ìš©ìë“¤ë§Œ ì´ëŸ° ì—ëŸ¬ê°€ ë°œìƒí–ˆë˜ ê²ƒì…ë‹ˆë‹¤...</p>\n<p>ğŸ¤¯ Wow... ì´ ë¬¸ì œë¥¼ ì§ë©´í•˜ê³  ë‚˜ì„œ React-Queryê°€ OSì— ë”°ë¼ì„œ ë™ì‘ì´ ë‹¤ë¥¸ê°€ ì˜ì‹¬ì´ ë“¤ ì •ë„ë¡œ ë¬¸ì œì˜ í•€íŠ¸ë¥¼ ì¡ì§€ ëª»í–ˆìŠµë‹ˆë‹¤</p>\n<hr>\n<blockquote>\n<p>ì—ëŸ¬ê°€ ë°œìƒí•œ ì‹œë‚˜ë¦¬ì˜¤ëŠ” ë‹¤ìŒê³¼ ê°™ì•„ìš”. í•œ ë²ˆ ë³¼ê¹Œìš”?</p>\n</blockquote>\n<h3>1. ì¼ì • ì¶”ê°€</h3>\n<p>ë‹¤ìŒê³¼ ê°™ì´ ì¼ì •ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.\nì´ ë•ŒëŠ” ë‹¤í–‰íˆë„ ìƒˆë¡­ê²Œ ì¶”ê°€ëœ ì¼ì •ì´ ë°”ë¡œ getí•˜ëŠ” responseì— ë°˜ì˜ì´ ë˜ì–´ìˆë„¤ìš”.\n<img src='https://velog.velcdn.com/images/jhy979/post/22dd80f0-fe58-4edd-99a3-7530f366d9b7/image.png' width='500'></p>\n<h3>2. ì¼ì • ì‚­ì œ</h3>\n<p>ì´ì œ ì¼ì •ì„ ì‚­ì œí•´ë³¼ê¹Œìš”?\n<img src='https://velog.velcdn.com/images/jhy979/post/68e631e1-bfaf-4e16-b6a3-2075022eea91/image.png' width='500'></p>\n<p>ê°œë°œì ë„êµ¬ì˜ ë„¤íŠ¸ì›Œí¬ íƒ­ì„ ì—´ì–´ì„œ í™•ì¸í•´ë´¤ì–´ìš”.</p>\n<img src='https://velog.velcdn.com/images/jhy979/post/30df7bb6-115f-4227-a4cd-18ba91a7c799/image.png'>\n<p><code class=\"language-text\">427</code>ì€ ì‚­ì œ ìš”ì²­ì´ê³ \n<code class=\"language-text\">schedules?startDateTime...</code>ì€ ë‹¤ì‹œ ì¼ì •ì„ getí•˜ëŠ” ìš”ì²­ì…ë‹ˆë‹¤.</p>\n<p>ë³´ë‹ˆê¹ <code class=\"language-text\">delete</code> ì´í›„ì— ë‹¤ì‹œ <code class=\"language-text\">get</code> í•˜ëŠ” ì‘ì—…ì´ ì´ë£¨ì–´ì§€ê³  ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆì–´ìš”.</p>\n<p>ğŸ”¨ ì½”ë“œë¥¼ ì ê¹ ì‚´í´ë³´ë©´</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">useDeleteSchedule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> scheduleId<span class=\"token punctuation\">,</span> onSuccess <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> UseDeleteScheduleParams<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> accessToken <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useRecoilValue</span><span class=\"token punctuation\">(</span>userState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> queryClient <span class=\"token operator\">=</span> <span class=\"token function\">useQueryClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> mutate <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useMutation</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>AxiosResponse<span class=\"token punctuation\">,</span> AxiosError<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> scheduleApi<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>accessToken<span class=\"token punctuation\">,</span> scheduleId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">onSuccess</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// âœ‹ ì‚­ì œê°€ ì„±ê³µí•˜ë©´ ì¼ì •ì„ ë‹¤ì‹œ getí•´ì£¼ì„¸ìš”!!!</span>\n        queryClient<span class=\"token punctuation\">.</span><span class=\"token function\">invalidateQueries</span><span class=\"token punctuation\">(</span><span class=\"token constant\">CACHE_KEY</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SCHEDULES</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        onSuccess <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">onSuccess</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> mutate <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>delete useMutationì—ì„œ <code class=\"language-text\">onSuccess</code>ì•ˆì— ì¼ì •ì„ getí•˜ëŠ” ì¿¼ë¦¬ë¥¼ <code class=\"language-text\">invalidation</code>í•´ì£¼ì—ˆê¸° ë•Œë¬¸ì— ë‹¹ì—°íˆ ì‚­ì œê°€ ì„±ê³µí•˜ê³  ë‚˜ì„œ ì¼ì •ì„ ë‹¤ì‹œ ê°€ì ¸ì˜¤ëŠ” ì¤„ ì•Œì•˜ìŠµë‹ˆë‹¤.</p>\n<p>ì‹¤ì œë¡œë„ ë„¤íŠ¸ì›Œí¬íƒ­ì—ì„œ ë³´ì‹œë‹¤ì‹œí”¼ <code class=\"language-text\">427</code> ë‹¤ìŒì— ì¼ì •ì„ ë‹¤ì‹œ getí•˜ê³  ìˆìœ¼ë‹ˆê¹Œìš”!</p>\n<h3>3. ëŒ€ì°¸ì‚¬</h3>\n<p>í•˜ì§€ë§Œ ê²°ê³¼ëŠ” ë‹¤ìŒì²˜ëŸ¼ ì‚­ì œê°€ ë˜ì§€ ì•Šê³  ê·¸ëŒ€ë¡œ ë‚¨ì•„ ìˆì—ˆìŠµë‹ˆë‹¤ğŸ˜‚ <del>(ì´ê²Œ ë§ì´ë˜ëƒê³ )</del></p>\n<img src='https://velog.velcdn.com/images/jhy979/post/22dd80f0-fe58-4edd-99a3-7530f366d9b7/image.png' width='500'>\n<blockquote>\n<p><code class=\"language-text\">ìƒˆë¡œê³ ì¹¨</code>ì„ í•´ì„œ ì•„ì˜ˆ get ì¿¼ë¦¬ ìš”ì²­ì„ ë‹¤ì‹œ í•´ì•¼ ì‚­ì œê°€ ëœì±„ë¡œ responseê°€ ì™”ì–´ìš”. í•˜.. ì´ê±° ë¦¬ë Œë”ë§ì„ ì¼ë¶€ëŸ¬ ë°œìƒì‹œì¼œì¤˜ì•¼í•˜ë‚˜? ã…‹ã…‹ã…‹íã… ã… </p>\n</blockquote>\n<hr>\n<h2>ì‚½ì§ˆ</h2>\n<h3>1. DB ì‹œì  ë¬¸ì œì¼ê¹Œ?</h3>\n<blockquote>\n<p>ê°€ì¥ ë¨¼ì € ë“  ìƒê°ì€ DBì—ì„œ ì¼ì •ì´ ì‚­ì œë˜ì§€ ì•Šì€ì±„ë¡œ get ìš”ì²­ì´ ì§„í–‰ë˜ì§€ ì•Šì•˜ì„ê¹Œì˜€ìŠµë‹ˆë‹¤.</p>\n</blockquote>\n<p>ì‚­ì œê°€ ì„±ê³µí–ˆë‹¤ê³  <code class=\"language-text\">ì‘ë‹µì½”ë“œ 204</code>ë¥¼ ì£¼ì—ˆì§€ë§Œ ì‹¤ì œë¡œ DBì—ëŠ” ë°˜ì˜ì´ ë˜ì§€ ì•Šì€ì±„ë¡œ ë°”ë¡œ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ì˜¤ëŠ”ê±´ ì•„ë‹ê¹Œ?</p>\n<p>ë°±ì—”ë“œ íŒ€ì›ë“¤ì€ ì ˆëŒ€ ì ˆëŒ€ ê·¸ëŸ° ì¼ì´ ë°œìƒí•  ìˆ˜ëŠ” ì—†ë‹¤ê³  í•˜ë”ë¼êµ¬ìš”. ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ì§ì ‘ ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ì—¬ í™•ì¸í•´ì¤€ ìš°ë¦¬ íŒ€ì›ë“¤ ë„ˆë¬´ ê°ì‚¬í•©ë‹ˆë‹¤..ğŸ˜€ğŸ˜€</p>\n<p>ì ê·¸ëŸ¼ í”„ë¡ íŠ¸ì—”ë“œìª½ì—ì„œì˜ ë¬¸ì œê² ì£ ?</p>\n<hr>\n<h3>2. useMutationì˜ onSuccessì˜ ë¬¸ì œì¼ê¹Œ?</h3>\n<p>ë‹¬ë¡ í”„ë¡œì íŠ¸ì—ì„œëŠ” <code class=\"language-text\">react-query</code>ë¥¼ ì‚¬ìš©í•˜ê³  ìˆì–´ìš”. ê¹ƒí—ˆë¸Œ starê°€ <code class=\"language-text\">âœ¨30.1k</code>ê°€ ì°íë§Œí¼ ì¸ê¸° ë§ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì£ .</p>\n<p>í•˜ì§€ë§Œ ìµœê·¼ í”„ë¡œì íŠ¸ì—ì„œ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ <code class=\"language-text\">recoil</code>ì„ ì‚¬ìš©í•˜ë˜ ë„ì¤‘ íŠ¹ì • ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ” ì—ëŸ¬ê°€ ìˆì—ˆë˜ ì ì´ ìˆì—ˆì–´ìš”.</p>\n<p>ğŸ¥µ ì´ ì´í›„ë¡œ ì•„ë¬´ë¦¬ ê³µì‹ ë ¥ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¼ë„ ë§¹ì‹ í•˜ì§€ ì•Šê² ë‹¤ê³  ë‹¤ì§í–ˆì—ˆì–´ìš”.</p>\n<p>í˜¸ì˜¥ì‹œ í˜¸ì˜¥ì‹œ <code class=\"language-text\">react-query useMutationì˜ onSuccess</code>ê°€ mutate ì‘ì—…ì´ í™•ì‹¤íˆ ì„±ê³µëœ í›„ì— ì‹¤í–‰ì´ ë˜ëŠ” ê²ƒì´ ë§ì„ê¹Œ? ì˜ì‹¬í•´ë´¤ì–´ìš”.</p>\n<p>ê´€ë ¨í•´ì„œ <code class=\"language-text\">react-query</code>ì˜ ê¹ƒí—ˆë¸Œ ì´ìŠˆ ëª©ë¡ë“¤ì„ ì „ë¶€ ì°¾ì•„ë´¤ì§€ë§Œ... ì—†ë”ë¼êµ¬ìš”.</p>\n<p>ê·¸ë ‡ë‹¤ë©´ ì´ê±´ ë¬¸ì œê°€ ì•„ë‹ˆë¼ê³  ìƒê°ì´ ë“¤ë”ë¼êµ¬ìš”.</p>\n<hr>\n<h3>3. ê·¸ëŸ¼ ë¬¸ì œëŠ” ë‹¨ í•˜ë‚˜ì£ . react-queryë¥¼ ì˜ëª» ì“°ê³  ìˆë‹¤!</h3>\n<blockquote>\n<p>ëŒê³  ëŒì•„ ë‹¤ì‹œ ë„¤íŠ¸ì›Œí¬ íƒ­ì— ë“¤ì–´ê°€ ìš”ì²­ì´ ì‹¤í–‰ë˜ëŠ” ì‹œì ì„ ë¹„êµí•´ë´¤ì–´ìš”.</p>\n</blockquote>\n<p>ì´ë²ˆì—” ë” ìì„¸í•œ ìš”ì²­ ì‹œê°„ì„ ë³´ê¸° ìœ„í•´ì„œ <code class=\"language-text\">Timing íƒ­ê¹Œì§€ ë“¤ì–´ê°€ì„œ í™•ì¸í•´ë´¤ì–´ìš”.</code></p>\n<p>ğŸ˜€ ì‚­ì œ ìš”ì²­ íì— ë“¤ì–´ê°€ê³  ì‹¤í–‰ë˜ëŠ” ì‹œì ì…ë‹ˆë‹¤.</p>\n<img src='https://velog.velcdn.com/images/jhy979/post/8bf786cb-77e4-4090-81c6-83e340e07025/image.png' width='600'>\n<ul>\n<li>1.62ì´ˆì— ì‹¤í–‰ë˜ê³  ì‚­ì œ ì„±ê³µê¹Œì§€ 0.039ì •ë„ ê±¸ë¦¬ë„¤ìš”.</li>\n<li>ê·¸ëŸ¼ ì„±ê³µì‹œì— ë‹¤ìŒ ë¡œì§ì€ 1.66ì´ˆ ì •ë„ì— ì‹œì‘ë˜ì–´ì•¼í•  ê²ƒ ê°™ì€ë°ìš”! ë†€ë¼ìš´ ì¼ì´ ë°œìƒí•©ë‹ˆë‹¤. ì•„ë˜ë¥¼ ë³´ì‹œì£ .</li>\n</ul>\n<p>ğŸ˜€ ì‚­ì œ ìš”ì²­ ì´í›„ Get ìš”ì²­ì´ íì— ë“¤ì–´ê°€ê³  ì‹¤í–‰ë˜ëŠ” ì‹œì ì…ë‹ˆë‹¤.\n<img src='https://velog.velcdn.com/images/jhy979/post/bc3bdc64-074c-4810-8cc7-503100c47350/image.png' width='600'></p>\n<ul>\n<li>ì—¥? ì‹œì‘ ì‹œì ì´ 1.63ì´ˆ? ë¹„ìƒ!!!!! ì´ˆë¹„ìƒ!!!!!</li>\n<li>ì‚­ì œê°€ ì„±ê³µí•œ ì‹œì ì€ (1.66ì´ˆ)ì¸ë° get ìš”ì²­ì´ (1.63ì´ˆ)ì— ì‹¤í–‰ëœë‹¤ë‹ˆ ë§ì´ ì•ˆë˜ì£ .</li>\n</ul>\n<blockquote>\n<p>ê²°ë¡ ì´ ë‚˜ì™”ìŠµë‹ˆë‹¤. </p>\n</blockquote>\n<ol>\n<li>DBë¬¸ì œë„ ì•„ë‹ˆê³  </li>\n<li>onSuccessì˜ ë¬¸ì œë„ ì•„ë‹ˆë‹¤. (ì‹¤í–‰ë˜ëŠ” Timingì„ ë³´ë‹ˆ onSuccessê°€ ì œëŒ€ë¡œ ì‹¤í–‰ë˜ê³  ìˆì§€ ì•Šë‹¤.)</li>\n<li><code class=\"language-text\">ì € get</code> ìš”ì²­ì€ ë‹¤ë¥¸ ì´ìœ ë¡œ ì‹¤í–‰ë˜ê³  ìˆë‹¤!!!\n(ì¡°ê¸ˆ ë” ë³´íƒœì–´ ì„¤ëª…í•˜ìë©´ <code class=\"language-text\">ì € get</code> ìš”ì²­ì´ <code class=\"language-text\">onSuccessì˜ get</code>ìš”ì²­ì´ ì‹¤í–‰ë  ì‹œì ì— ì´ë¯¸ ì‹¤í–‰ë˜ê³  ìˆê¸° ë•Œë¬¸ì— <code class=\"language-text\">onSuccessì˜ get</code> ìš”ì²­ì´ ë¬´ì‹œë˜ì—ˆë˜ ê±°ì£ .)</li>\n</ol>\n<p>ê·¸ëŸ¼ ì™œ ë•Œë¬¸ì— ì € getìš”ì²­ì´ ì‹¤í–‰ë˜ê³  ìˆëŠ”ì§€ íŒŒì•…í•´ì•¼ê² ì£ .</p>\n<hr>\n<h2>í•´ê²°</h2>\n<blockquote>\n<p>React QueryëŠ” ë°ì´í„° Fetching, ìºì‹±, ë™ê¸°í™”, ì„œë²„ ìª½ ë°ì´í„° ì—…ë°ì´íŠ¸ ë“±ì„ ì‰½ê²Œ ë§Œë“¤ì–´ ì£¼ëŠ” React ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.</p>\n</blockquote>\n<ul>\n<li>ë„¤ ë§ì£ , ì €í¬ëŠ” ë¦¬ì•¡íŠ¸ì¿¼ë¦¬ë¥¼ <code class=\"language-text\">ìºì‹±</code>ì„ ê°€ì¥ í° ëª©ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê³ ì í–ˆìŠµë‹ˆë‹¤.</li>\n<li>í•˜ì§€ë§Œ í”„ë¡œì íŠ¸ì—ì„œ queryClientì˜ <code class=\"language-text\">staleTime, cacheTime, refetchOnWindowFocus, refetchOnMount</code> ë“±ì„ ì§€ì •í•´ì£¼ì§€ ì•Šì€ì±„ë¡œ <code class=\"language-text\">default Optionìœ¼ë¡œ ê·¸ëŒ€ë¡œ</code> ì‚¬ìš©í•˜ê³  ìˆì—ˆì–´ìš”.</li>\n</ul>\n<p><code class=\"language-text\">refetchOnWindowFocus</code> : ë°ì´í„°ê°€ stale ìƒíƒœì¼ ê²½ìš° í¬ì»¤ìŠ¤ë  ë•Œ refetchë¥¼ ì‹¤í–‰í•˜ëŠ” ì˜µì…˜</p>\n<p><code class=\"language-text\">refetchOnMount</code> : ë°ì´í„°ê°€ stale ìƒíƒœì¼ ê²½ìš° ë§ˆìš´íŠ¸ ì‹œ ë§ˆë‹¤ refetchë¥¼ ì‹¤í–‰í•˜ëŠ” ì˜µì…˜</p>\n<blockquote>\n<p>ê·¸ë¦¬ê³  ì¤‘ìš”í•œ ê²ƒì€.. staleTimeì˜ default ê°’ì€ 0ì´ë¼ëŠ” ì ì´ì£ !</p>\n</blockquote>\n<p>ğŸ¥µ staleTimeì´ 0ì´ë¯€ë¡œ í•­ìƒ ë°ì´í„°ê°€ ì˜¤ì—¼ëœ ìƒíƒœë¡œ ì¸ì‹ì„ í–ˆê³  </p>\n<p>ê·¸ëŸ¬ë‹ˆ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë˜ê±°ë‚˜ í¬ì»¤ìŠ¤ë˜ì—ˆì„ë•Œ getìš”ì²­ì„ ê³„ì†ê³„ì†ê³„ì† í–ˆë˜ ê²ƒì´ì£ . ìœ¼ì•„... ë¬¸ì œ ë°œê²¬ ë°œê²¬!!!</p>\n<p>ğŸ¤¯ ì‚­ì œ í›„ì— ë°˜ì˜ë˜ì§€ ì•Šì€ì±„ë¡œ ì˜¨ ê²ƒ ê°™ì€ responseëŠ” ì‚¬ì‹¤ ì‚­ì œ í›„ì˜ ì‘ë‹µì´ ì•„ë‹ˆë¼ <code class=\"language-text\">ë§ˆìš´íŠ¸ í˜¹ì€ í¬ì»¤ìŠ¤ë¡œ ì¸í•´ ë°œìƒí•œ get ìš”ì²­</code>ì˜€ë˜ê±°ì£ ã… ã… </p>\n<p>ì´ ì‚¬ì‹¤ì„ ì•Œê³  ë‹¤ì‹œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì˜ waterfallì„ ì‚´í´ë³´ë‹ˆ ë” ëª…í™•í•´ì¡ŒìŠµë‹ˆë‹¤.</p>\n<p>ì•„ê¹Œ ë´¤ë˜ ê·¸ë¦¼ì¸ë° ì´ìŠˆë¥¼ ì•Œê³ ë³´ë‹ˆ ë°”ë¡œ ë³´ì´ëŠ”êµ°ìš”.. <del>(ì°¸ ì•¼ì†í•˜ë„¤ìš”ã… ã… )</del></p>\n<img src='https://velog.velcdn.com/images/jhy979/post/30df7bb6-115f-4227-a4cd-18ba91a7c799/image.png'>\n<p>ì¢Œì¸¡ ì—°ë‘ìƒ‰ ë°”ë¥¼ ì‚´í´ë³´ë‹ˆ <code class=\"language-text\">427 delete ìš”ì²­</code>ê³¼ <code class=\"language-text\">schedule?startDateTime... get ìš”ì²­</code>ì´ ê°™ì€ ì‹œì ì— queueì— ë“¤ì–´ê°€ê³  ìˆêµ°ìš”ğŸ˜‚ğŸ˜‚</p>\n<p>ë°”ë¡œ staleTimeì„ ì§€ì •í•´ì¤¬ì–´ìš”.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> queryClient <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">QueryClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    defaultOptions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      queries<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        retry<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        retryDelay<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n        onError<span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// 1ë¶„ìœ¼ë¡œ staleTime ì§€ì •í•˜ê¸°</span>\n        staleTime<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      mutations<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        retry<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        retryDelay<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n        onError<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì°¸ê³ ë¡œ refetchOnMount, refetchOnWindowFocusëŠ” true ì„¤ì •í•´ì¤˜ì•¼ staleí•´ì¡Œì„ë•Œ ì œëŒ€ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ê²ƒì´ë¼ê³  íŒë‹¨í•˜ì—¬ trueì¸ ê¸°ë³¸ ì˜µì…˜ê°’ìœ¼ë¡œ ê±´ë“œë¦¬ì§€ ì•Šì•˜ì–´ìš”.</p>\n<hr>\n<h2>í™•ì¸</h2>\n<blockquote>\n<p>í•´ê²°ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë´…ì‹œë‹¤. ì‚­ì œ í›„ onSuccess ë‚´ë¶€ ë¡œì§ì¸ ì¼ì • get ìš”ì²­ì´ ë˜ëŠ”ì§€ í™•ì¸í•´ë³¼ê¹Œìš”?</p>\n</blockquote>\n<img src='https://velog.velcdn.com/images/jhy979/post/4376e31b-b5d8-4b86-bff0-bb3b759c76b9/image.png' width='800'>\n<p>ğŸŒˆë“œë””ì–´ <code class=\"language-text\">238 ì‚­ì œ ìš”ì²­</code>ì´ ì„±ê³µí•˜ê³  <code class=\"language-text\">schedules?startDateTime... get ìš”ì²­</code>ì´ ì‹œì ì— ë§ê²Œ ë“¤ì–´ì˜¤ë„¤ìš”. </p>\n<p>ğŸŒˆ ì˜¤ë¥¸ìª½ waterfall ì—°ë‘ìƒ‰ ë°”ê°€ ë³´ì´ì‹œì£ ? ì´ê²Œ ë§ì§€!</p>\n<hr>\n<h2>ê²°ë¡ </h2>\n<p>ğŸ¤¦â€â™‚ï¸ ì´ë²ˆ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ì„ í†µí•´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ë„ë¥¼ ëª…í™•íˆ íŒŒì•…í•´ì•¼í•œë‹¤ëŠ” ê²ƒì„ ëŠê¼ˆì–´ìš”.</p>\n<ul>\n<li>React-Queryë¥¼ ë„ì…í•œ ì´ìœ ì˜ ê°€ì¥ í° ì´ìœ ëŠ” <code class=\"language-text\">ìºì‹±ì—ì„œì˜ ì´ì </code>ì´ì—ˆëŠ”ë° ì´ ë¶€ë¶„ì„ ê°œë°œí•  ë•Œ í¬ê²Œ ìƒê°í•˜ì§€ ì•Šê³  default optionê°’ë“¤ì„ ì‚¬ìš©í•˜ë©´ ë  ì¤„ ì•Œì•˜ë˜ ê²ƒì´ ë¬¸ì œì˜€ì–´ìš”.</li>\n<li>ê°„í—ì ìœ¼ë¡œ ë°œìƒí•´ì„œ ì˜¤ëœ ì‹œê°„ë™ì•ˆ ì—ëŸ¬ë¥¼ í•´ê²°í•˜ì§€ ëª»í–ˆìœ¼ë‚˜ ë•ë¶„ì— <code class=\"language-text\">ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë„ì…í•  ë•Œ ëª…í™•í•œ ì˜ë„ì— ë§ê²Œ</code> ì‚¬ìš©í•´ì•¼í•œë‹¤ëŠ” ì ì„ ë¼ˆì €ë¦¬ê²Œ ëŠë¼ê²Œ ë˜ì—ˆì–´ìš”.</li>\n</ul>","frontmatter":{"title":"react-query useMutation onSuccess ì•ˆ ë˜ëŠ”ì¤„ ì•Œì•˜ë˜ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…","date":"October 18, 2022","update":null,"tags":["react","react-query","trouble-shooting"],"series":null},"fields":{"slug":"/react-query-useMutation-trouble-shooting/","readingTime":{"minutes":11.205}}},"seriesList":{"edges":[{"node":{"id":"a621dc7b-8590-5ec6-9b52-3d9e5182486d","fields":{"slug":"/appearance-background-of-jpa/"},"frontmatter":{"title":"JPA ë“±ì¥ë°°ê²½"}}},{"node":{"id":"9d2a87b6-2b9c-5b87-b790-3426d17c2d8e","fields":{"slug":"/intellij-final-keyword/"},"frontmatter":{"title":"IntelliJì—ì„œ ë©”ì†Œë“œ ì¶”ì¶œí•œ ë©”ì†Œë“œì˜ íŒŒë¼ë¯¸í„°ì— final í‚¤ì›Œë“œ ìë™ ì¶”ê°€í•˜ê¸°"}}},{"node":{"id":"251e9767-1c92-5cf5-9cef-2c4a42c10df2","fields":{"slug":"/git-branch-strategy/"},"frontmatter":{"title":"ë‹¬ë¡íŒ€ì˜ git ë¸Œëœì¹˜ ì „ëµì„ ì†Œê°œí•©ë‹ˆë‹¤."}}},{"node":{"id":"5090cce3-0c1f-5376-badc-1d25e44c1bd9","fields":{"slug":"/infinite-scroll/"},"frontmatter":{"title":"Reactì—ì„œ ë¬´í•œ ìŠ¤í¬ë¡¤ êµ¬í˜„í•˜ê¸°"}}},{"node":{"id":"bcb53ba5-0286-5d10-96c2-fdcb88e2cc60","fields":{"slug":"/package-structure/"},"frontmatter":{"title":"ë‹¬ë¡ì— ì ì ˆí•œ íŒ¨í‚¤ì§€ êµ¬ì¡° ê³ ë¯¼í•˜ê¸°"}}},{"node":{"id":"a7fc89de-f37c-596e-a81d-3d4fe5a795b8","fields":{"slug":"/data-jpa-slice-page/"},"frontmatter":{"title":"Spring Data JPAì˜ Slice & Page"}}},{"node":{"id":"e1ba92ee-0cf0-50c8-80bd-5da5075df8d1","fields":{"slug":"/data-jpa-auditing/"},"frontmatter":{"title":"Spring Data JPAì˜ Auditing"}}},{"node":{"id":"3e036508-c916-504e-9e8d-89f69332471e","fields":{"slug":"/separated-interface/"},"frontmatter":{"title":"ì™¸ë¶€ì™€ ì˜ì¡´ì„± ë¶„ë¦¬í•˜ê¸°"}}},{"node":{"id":"cade544a-16ef-58a3-b97c-824986a8395f","fields":{"slug":"/apply-rest-docs/"},"frontmatter":{"title":"MockMvcë¥¼ ì‚¬ìš©í•œ Spring RestDocs"}}},{"node":{"id":"87649d54-d59e-58a6-afd5-8491eb4113a8","fields":{"slug":"/properties-to-object/"},"frontmatter":{"title":"properties ê°ì²´ë¡œ ë‹¤ë£¨ê¸°"}}},{"node":{"id":"eb380f6d-5a00-5a9e-a916-003fb292cc8a","fields":{"slug":"/test-fixture-constant/"},"frontmatter":{"title":"í…ŒìŠ¤íŠ¸ì—ì„œ Entity ê°ì²´ë¥¼ ìƒìˆ˜ë¡œ ë‘ë©´ ì•ˆ ë˜ëŠ” ì´ìœ "}}},{"node":{"id":"9734e30a-b430-5922-919d-f53808a56eb9","fields":{"slug":"/what_is_nginx/"},"frontmatter":{"title":"NGINX ë€?"}}},{"node":{"id":"9ebc6e21-2a76-5d42-be33-c2dae8c849b2","fields":{"slug":"/ssl_protocol/"},"frontmatter":{"title":"SSLì„ í†µí•œ HTTPSí†µì‹  ê³¼ì •"}}},{"node":{"id":"fa5ad595-1f81-5a20-a884-2da69adee3c5","fields":{"slug":"/integration-test-slice-test/"},"frontmatter":{"title":"í†µí•© í…ŒìŠ¤íŠ¸ì™€ ìŠ¬ë¼ì´ìŠ¤ í…ŒìŠ¤íŠ¸"}}},{"node":{"id":"d8c66823-bb05-5e83-a6a1-2fd9af450b6f","fields":{"slug":"/query-invalidation/"},"frontmatter":{"title":"React-Queryì—ì„œì˜ ë°ì´í„° ìµœì‹ í™” (Query Invalidation)"}}},{"node":{"id":"f5187517-342f-52a1-9092-d12c1a80d132","fields":{"slug":"/seperate-components/"},"frontmatter":{"title":"ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬ ê¸°ì¤€"}}},{"node":{"id":"d6249c8b-bea6-5c91-8477-d3dd15ad9b39","fields":{"slug":"/test-isolation/"},"frontmatter":{"title":"í…ŒìŠ¤íŠ¸ ê²©ë¦¬"}}},{"node":{"id":"98e390ef-fb19-5d01-a3ef-d14bc0e65176","fields":{"slug":"/dallog-jacoco/"},"frontmatter":{"title":"ë‹¬ë¡ì˜ Jacoco ì ìš©ê¸° (feat. Gradle)"}}},{"node":{"id":"33d19946-de0c-5b41-bfa0-d7c3fd80f10b","fields":{"slug":"/google-refresh-token/"},"frontmatter":{"title":"Googleì€ Refresh Tokenì„ ì‰½ê²Œ ë‚´ì£¼ì§€ ì•ŠëŠ”ë‹¤."}}},{"node":{"id":"8168857d-a82c-5608-bd40-cea4b917d17d","fields":{"slug":"/submodule/"},"frontmatter":{"title":"ë‹¬ë¡ ì„œë¸Œëª¨ë“ˆ ë„ì…ê¸°"}}},{"node":{"id":"836fc724-7e2f-5c7a-a42b-c0cc9163167a","fields":{"slug":"/dallog-flyway/"},"frontmatter":{"title":"ë‹¬ë¡ì˜ ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìœ„í•œ Flyway ì ìš©ê¸°"}}},{"node":{"id":"7a3bde6d-746b-56fd-8d91-0d8059ebf1f8","fields":{"slug":"/json-property-json-naming/"},"frontmatter":{"title":"@JsonProperty, @JsonNaming"}}},{"node":{"id":"50673f5c-f835-5982-b70c-b77e5a352a2c","fields":{"slug":"/servlet-life-cycle/"},"frontmatter":{"title":"ì„œë¸”ë¦¿ ìƒëª…ì£¼ê¸°ì™€ ì§ì ‘ë§Œë“  í†°ìº£ì„ í†µí•œ ì˜ë¬¸ì "}}},{"node":{"id":"61e7f4d1-7b3a-5968-bfe8-c3f6efb88748","fields":{"slug":"/preparing-for-performance-test/"},"frontmatter":{"title":"í†°ìº£ íŠœë‹ì„ ìœ„í•œ ë‹¬ë¡ì˜ ì„œë²„ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì¤€ë¹„ ê³¼ì •"}}},{"node":{"id":"9272061d-68c6-5f82-a961-0e2efe0fd6be","fields":{"slug":"/cyclic-dependency/"},"frontmatter":{"title":"cyclic dependency"}}},{"node":{"id":"6e779308-f266-58af-bfcc-e9fee6d39a98","fields":{"slug":"/multi-datasource-issue-with-osiv/"},"frontmatter":{"title":"ëŒ€ì²´ ì™œ DataSource ë¼ìš°íŒ…ì´ ì•ˆë˜ëŠ”ê±°ì•¼!? (feat. OSIV)"}}},{"node":{"id":"0e63245e-c52c-5977-9f60-f94ee0fd00fc","fields":{"slug":"/hikari-cp-theory/"},"frontmatter":{"title":"HikariCPì™€ ì ì ˆí•œ í’€ ì‚¬ì´ì¦ˆ ê³ ë¯¼í•˜ê¸° (ì´ë¡ í¸)"}}},{"node":{"id":"c7bea043-345c-5f78-ae53-796a83812961","fields":{"slug":"/react-query-useMutation-trouble-shooting/"},"frontmatter":{"title":"react-query useMutation onSuccess ì•ˆ ë˜ëŠ”ì¤„ ì•Œì•˜ë˜ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…"}}}]},"previous":{"fields":{"slug":"/hikari-cp-theory/"},"frontmatter":{"title":"HikariCPì™€ ì ì ˆí•œ í’€ ì‚¬ì´ì¦ˆ ê³ ë¯¼í•˜ê¸° (ì´ë¡ í¸)"}},"next":null},"pageContext":{"id":"c7bea043-345c-5f78-ae53-796a83812961","series":null,"previousPostId":"0e63245e-c52c-5977-9f60-f94ee0fd00fc","nextPostId":null}},"staticQueryHashes":[]}