{"componentChunkName":"component---src-templates-post-jsx","path":"/mechanism-of-jpa/","result":{"data":{"site":{"siteMetadata":{"title":"dal.log"}},"markdownRemark":{"id":"0352eb77-cded-5720-a401-ed0c801feef9","excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” ë‹¬ë¡íŒ€ í¬ë£¨ 'ë¦¬ë²„'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ë“¤ì–´ê°€ê¸°ì— ì•ì„œ ì´ì „ í¬ìŠ¤íŒ…ì—ì„œ SQL ì¤‘ì‹¬ì ì¸ ê°œë°œì˜ ë¬¸ì œì ì„ ì‚´í´ë³´ê³  ê°ì²´ ì¤‘ì‹¬ì ì¸ ê°œë°œì„ í•˜ê¸°ìœ„í•œ JAVAì˜ JPAë¥¼ ê°€ë³ê²Œ ì–¸ê¸‰í•´ë³´ì•˜ë‹¤. ê·¸ë ‡ë‹¤ë©´, JPAëŠ” ì–´ë– í•œ ë§¤ì»¤ë‹ˆì¦˜ìœ¼ë¡œ JAVAì—ì„œ ì‘ë™í• ê¹Œ?\nì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œ JPAì˜ êµ¬ë™ë°©ì‹ì„ ìì„¸íˆ ì•Œì•„ë³´ì.   JPA êµ¬ë™ë°©ì‹ ìš°ì„ , ì•„ë˜ì˜ ê·¸ë¦¼ì„ â€¦","html":"<blockquote>\n<p>ì´ ê¸€ì€ ìš°í…Œì½” ë‹¬ë¡íŒ€ í¬ë£¨ '<a href=\"https://github.com/gudonghee2000\">ë¦¬ë²„</a>'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.</p>\n</blockquote>\n<h3>ë“¤ì–´ê°€ê¸°ì— ì•ì„œ</h3>\n<p>ì´ì „ í¬ìŠ¤íŒ…ì—ì„œ SQL ì¤‘ì‹¬ì ì¸ ê°œë°œì˜ ë¬¸ì œì ì„ ì‚´í´ë³´ê³  ê°ì²´ ì¤‘ì‹¬ì ì¸ ê°œë°œì„ í•˜ê¸°ìœ„í•œ JAVAì˜ JPAë¥¼ ê°€ë³ê²Œ ì–¸ê¸‰í•´ë³´ì•˜ë‹¤.</p>\n<p>ê·¸ë ‡ë‹¤ë©´, JPAëŠ” ì–´ë– í•œ ë§¤ì»¤ë‹ˆì¦˜ìœ¼ë¡œ JAVAì—ì„œ ì‘ë™í• ê¹Œ?\nì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œ JPAì˜ êµ¬ë™ë°©ì‹ì„ ìì„¸íˆ ì•Œì•„ë³´ì.  </p>\n<h3>JPA êµ¬ë™ë°©ì‹</h3>\n<p>ìš°ì„ , ì•„ë˜ì˜ ê·¸ë¦¼ì„ í†µí•´ JPAì˜ êµ¬ë™ë°©ì‹ì„ ê°€ë³ê²Œ ì‚´í´ë³´ì.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/a03ffcc3f1c93248b7d90f632efc734b/64756/jpa-mechanism.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 56.470588235294116%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAABJ0AAASdAHeZh94AAABG0lEQVQoz5VS2XLCMAzM/39gmSmQlBzQ0JDLxKdkV8JuKaEvaHZsj0ar1eFMiXqRRggxT5PRKrxiWbo9hIB8gg3e8yMBySOmYewv0zhc5zGg44BIvt04j8PhUJItVxHQBKdvUAyP/TC8bTbb3e7S90ngrkyZwLErIgSlVNM0PiqQVIBlHgkUyrX8Kt87AMP4zziYUqCbBdu6Z0A08uq0dIDPXIaT1IJUmopakf3l63z+PNFJ8PiHD9YqqeVijQajA9rHaXMPQHOqyo9jUym5pCHHeq1u27aq67o8zEMXEDzXb+mRyN6Zqizft9s8L45N7XlbP+J42x9actIIi6LY7/Ou6+LCshSB8LDb57bjOkgZHInFmOylL7VK/Q3CQoTKKFZc0gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='jpa mechanism' title='jpa mechanism' src='/static/a03ffcc3f1c93248b7d90f632efc734b/ca1dc/jpa-mechanism.png' srcset='/static/a03ffcc3f1c93248b7d90f632efc734b/e7570/jpa-mechanism.png 170w,\n/static/a03ffcc3f1c93248b7d90f632efc734b/f46e7/jpa-mechanism.png 340w,\n/static/a03ffcc3f1c93248b7d90f632efc734b/ca1dc/jpa-mechanism.png 680w,\n/static/a03ffcc3f1c93248b7d90f632efc734b/02d09/jpa-mechanism.png 1020w,\n/static/a03ffcc3f1c93248b7d90f632efc734b/64756/jpa-mechanism.png 1200w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy'>\n  </a>\n    </span></p>\n<p>ë¨¼ì €, JPAëŠ” Build íŒŒì¼ì„ í†µí•´ì„œ JPA ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•  <strong>êµ¬í˜„ì²´ í´ë˜ìŠ¤ì¸</strong> <code class=\"language-text\">Persistence</code> ìƒì„±í•œë‹¤.\n<strong>(JPAëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë©° êµ¬í˜„ì²´ë¡œëŠ” Hibernate, EclipseLink ë“±ì´ ìˆìŒ)</strong></p>\n<p>ê·¸ë¦¬ê³  ìƒì„±í•œ <code class=\"language-text\">Persistence</code>ë¡œ <code class=\"language-text\">META-INF/Persistence.xml</code>ë¼ëŠ” ì„¤ì •íŒŒì¼ì˜ ì •ë³´ë¥¼ ì½ì–´ì„œ <code class=\"language-text\">EntityManagerFactory</code>ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.</p>\n<p><code class=\"language-text\">EntityManagerFactory</code>ëŠ” í•„ìš”í• ë•Œ ë§ˆë‹¤ <code class=\"language-text\">EntityManager</code> ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤. </p>\n<p>ê°œë°œìëŠ” <code class=\"language-text\">EntityManager</code>ë¥¼ í†µí•´ì„œ DBì— ì ‘ê·¼í•˜ê³  CRUD ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.</p>\n<p>ìœ„ì™€ ê°™ì€ ê³¼ì •ì„ í†µí•´ JPAë¥¼ ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ê·¸ë ‡ë‹¤ë©´, <code class=\"language-text\">Persistence.xml</code>, <code class=\"language-text\">EntityManagerFactory</code>, <code class=\"language-text\">EntityManager</code>ë€ ë¬´ì—‡ì¼ê¹Œ?\nì•„ë˜ì—ì„œ ìì„¸íˆ ì‚´í´ë³´ì.</p>\n<h3>Persistence.xmlë€?</h3>\n<p><code class=\"language-text\">Persistence.xml</code>ì€ JPAê°€ ì—‘ì„¸ìŠ¤í•˜ë ¤ëŠ” ë°ì´í„°ë² ì´ìŠ¤ë“¤ì— ëŒ€í•´ í•„ìš”í•œ ì„¤ì •ì •ë³´ ë“¤ì„ ê¸°ìˆ í•´ë‘” íŒŒì¼ì´ë‹¤.\nJPAëŠ” ì´ íŒŒì¼ì˜ ì„¤ì •ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì ‘ê·¼í•  DBì˜ ì •ë³´ë¥¼ ê°€ì ¸ ì˜¬ ìˆ˜ ìˆë‹¤.</p>\n<p><code class=\"language-text\">Persistence.xml</code> íŒŒì¼ì— ëŒ€í•´ ì•„ë˜ ê·¸ë¦¼ê³¼ í•¨ê»˜ ìì„¸íˆ ì‚´í´ë³´ì.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;persistence version=&quot;2.2&quot;\n \txmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;&gt;\n\t&lt;persistence-unit name=&quot;hello&quot;&gt;\n \t\t&lt;properties&gt;\n \t\t\t&lt;!-- í•„ìˆ˜ ì†ì„± --&gt;\n \t\t\t&lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;org.h2.Driver&quot;/&gt;\n \t\t\t&lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;sa&quot;/&gt;\n \t\t\t&lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;&quot;/&gt;\n\t\t\t&lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:h2:tcp://localhost/~/test&quot;/&gt;\n \t\t\t&lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.H2Dialect&quot;/&gt;\n\n \t\t\t&lt;!-- ì˜µì…˜ --&gt;\n \t\t\t&lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt;\n \t\t\t&lt;property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot;/&gt;\n \t\t\t&lt;property name=&quot;hibernate.use_sql_comments&quot; value=&quot;true&quot;/&gt;\n \t\t\t&lt;!--&lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;create&quot; /&gt;--&gt;\n \t\t&lt;/properties&gt;\n\t&lt;/persistence-unit&gt;\n&lt;/persistence&gt; </code></pre></div>\n<p>ì²«ë²ˆì§¸ë¡œ <code class=\"language-text\">&lt;persistence version=&quot;2.2&quot; ...&gt;</code>íƒœê·¸ëŠ” ì‚¬ìš©í•  JPAì˜ ë²„ì „ê³¼ ë²„ì „ì— ëŒ€í•œ Persistence.XML ë¬¸ì„œí˜•ì‹ ë§í¬ë¥¼ ë‹´ê³  ìˆë‹¤.</p>\n<p><code class=\"language-text\">&lt;persistence-unit name=&quot;hello&quot;&gt;</code>íƒœê·¸ëŠ” í•˜ë‚˜ì˜ ì§€ì†ì„± ë‹¨ìœ„ë¥¼ ì˜ë¯¸í•œë‹¤. ì„œìˆ ì ìœ¼ë¡œ í‘œí˜„í•˜ë©´, <code class=\"language-text\">hello</code>ë¼ëŠ” ì´ë¦„ì„ ê°€ì§€ëŠ” <code class=\"language-text\">EntityManagerFactory</code>ë¥¼ í•˜ìœ„ ì„¤ì •ì— ë”°ë¼ ë§Œë“¤ê²ƒì´ë¼ëŠ” ì˜ë¯¸ì´ë‹¤. </p>\n<p><code class=\"language-text\">&lt;properties&gt;</code>ëŠ” <code class=\"language-text\">&lt;persistence-unit&gt;</code>ì´ ì—‘ì„¸ìŠ¤í•  DBì˜ ì •ë³´ì™€ ì¶”ê°€ì ì¸ ì˜µì…˜ ì •ë³´ë“¤ì„ ë‹´ëŠ”ë‹¤.</p>\n<p><code class=\"language-text\">&lt;property&gt;</code>ëŠ” ì˜µì…˜ ì •ë³´ë¥¼ í•˜ë‚˜ì”© ì„¤ì •í•˜ëŠ” ë¶€ë¶„ì´ë‹¤.\nìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ <code class=\"language-text\">í•„ìˆ˜ ì†ì„±</code> ë¶€ë¶„ì€ ì—‘ì„¸ìŠ¤í•  DBì— ëŒ€í•œ ì •ë³´ë¥¼ ë‹´ëŠ”ë‹¤.</p>\n<p>ì¶”ê°€ë¡œ <code class=\"language-text\">ì˜µì…˜</code> ë¶€ë¶„ì„ í•˜ë‚˜ì”© ì‚´í´ë³´ì.\n<code class=\"language-text\">hibernate.show_sql</code>ëŠ” DBì— ë‚ ë¦¬ëŠ” ì¿¼ë¦¬ë¬¸ì„ í™•ì¸ í• ê²ƒì¸ì§€ì— ëŒ€í•œ ì„¤ì •ì´ë‹¤.\n<code class=\"language-text\">hibernate.format_sql</code>ëŠ” ë³´ì—¬ì§€ëŠ” ì¿¼ë¦¬ë¬¸ì„ í¬ë§·íŒ…í•˜ëŠ” ì„¤ì •ì´ë‹¤.\n<code class=\"language-text\">hibernate.use_sql_comments</code>ëŠ” ì¶”ê°€ì ì¸ <code class=\"language-text\">/* */</code> ì£¼ì„ì„ ì¿¼ë¦¬ë¬¸ì— ë³´ì—¬ì£¼ëŠ” ì„¤ì •ì´ë‹¤.</p>\n<p><code class=\"language-text\">hibernate.hbm2ddl.auto</code> ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ìë™ìƒì„±ì— ëŒ€í•œ ì„¤ì •ì´ë‹¤.\n<code class=\"language-text\">hibernate.hbm2ddl.auto</code>ê°€ ê°€ì§€ëŠ” ì˜µì…˜ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">create: ê¸°ì¡´ í…Œì´ë¸” ì‚­ì œ í›„ ë‹¤ì‹œ ìƒì„± (DROP + CREATE)\ncreate-drop: createì™€ ê°™ìœ¼ë‚˜ ì¢…ë£Œì‹œì ì— í…Œì´ë¸” DROP\nupdate: ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë°˜ì˜ (ìš´ì˜ DBì— ì‚¬ìš©í•˜ë©´ ì•ˆëŒ)\nvalidate: entityì™€ tableì´ ì •ìƒ ë§¤í•‘ë˜ì—ˆëŠ”ì§€ë§Œ í™•ì¸\nnone: ì‚¬ìš©í•˜ì§€ ì•ŠìŒ</code></pre></div>\n<h4><strong>ì£¼ì˜ì â—</strong></h4>\n<p><strong>create, create-drop, updateëŠ” ìš´ì˜ DBì— ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤.<br>\ncreate, create-dropì€ ìš´ì˜ DBì˜ ë°ì´í„°ë¥¼ ì „ì²´ ì‚­ì œ ì‹œí‚¤ê¸° ë•Œë¬¸ì´ë‹¤.\nupdateëŠ” ì•„ì§ ì•Œì•„ë³¼í•„ìš”ê°€ìˆìŒ</strong></p>\n<p>ì´ì œ ì„¤ì •íŒŒì¼ì„ í†µí•´ ìƒì„±í•˜ëŠ” <code class=\"language-text\">EntityManagerFactory</code>ë¥¼ ì‚´í´ë³´ì.</p>\n<h3>EntityManagerFactoryë€?</h3>\n<p><code class=\"language-text\">EntityManagerFactory</code>ëŠ” <code class=\"language-text\">EntityManager</code>(Entityë¥¼ ê´€ë¦¬í•˜ê³  DB ê´€ë ¨ì‘ì—…ì„ ìˆ˜í–‰ í•¨)ì„ ìƒì„±í•˜ëŠ” ì¼ì„í•œë‹¤.</p>\n<p><strong>ğŸ’¡ <code class=\"language-text\">Entity</code> ëŠ” DB í…Œì´ë¸”ì— ëŒ€ì‘í•˜ëŠ” í•˜ë‚˜ì˜ ê°ì²´ë¥¼ ì˜ë¯¸í•œë‹¤.</strong></p>\n<p>ìš°ë¦¬ëŠ” <code class=\"language-text\">Persistence.xml</code> ì„¤ì •ì •ë³´ë¥¼ í†µí•´ì„œ <code class=\"language-text\">EntityManagerFactory</code>ë¥¼ ìƒì„±í• ìˆ˜ ìˆë‹¤.</p>\n<p>ì•„ë˜ì˜ ì˜ˆì‹œì½”ë“œë¡œ ì‚´í´ë³´ì.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JpaMain</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">EntityManagerFactory</span> emf <span class=\"token operator\">=</span> \n        \t\t\t<span class=\"token class-name\">Persistence</span><span class=\"token punctuation\">.</span><span class=\"token function\">createEntityManagerFactory</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// íŒŒë¼ë¯¸í„°ë¡œ Persistence.xmlì— ì„¤ì •í•œ persistence-unitì˜ name ì†ì„±ê°’ì„ ë„£ëŠ”ë‹¤.</span>\n        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì „ ì¥ì—ì„œ ì„¤ì •í–ˆë˜ <code class=\"language-text\">Persistence.xml</code> íŒŒì¼ì„ í†µí•´\nìš°ë¦¬ëŠ” <code class=\"language-text\">hello</code>ë¼ëŠ” ì´ë¦„ì„ ê°€ì§„ <code class=\"language-text\">&lt;persistence-unit&gt;</code>ì´ ì–´ë–¤ DBì— ì—‘ì„¸ìŠ¤ í•  ê²ƒì¸ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ì„¤ì •í–ˆì—ˆë‹¤.</p>\n<p>ìœ„ ì½”ë“œê°€ ë°”ë¡œ <code class=\"language-text\">Persistence.xml</code>ì— ì‘ì„±í•œ Persistence Unit(ì§€ì†ì„± ë‹¨ìœ„)ì„ ë°”íƒ•ìœ¼ë¡œ <code class=\"language-text\">EntityManagerFactory</code>ë¥¼ ìƒì„±í•˜ëŠ” ì½”ë“œì´ë‹¤.</p>\n<p><code class=\"language-text\">EntityManagerFactory</code>ë¥¼ í†µí•´ì„œ ìš°ë¦¬ëŠ” DB ê´€ë ¨ ì‘ì—…ì„ ì‹¤ì œë¡œ ìˆ˜í–‰í•  <code class=\"language-text\">EntityManager</code>ë¥¼ ìƒì„± í•  ìˆ˜ ìˆë‹¤.</p>\n<h4>ğŸ”<code class=\"language-text\">EntityManagerFactory</code>ê°€ ê°€ì§€ëŠ” íŠ¹ì§•</h4>\n<p><strong>1. ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ëŠ” í•˜ë‚˜ì˜ ë°ì´í„°ë² ì´ìŠ¤ì— í•˜ë‚˜ë§Œ ìƒì„±í•œë‹¤. (ìƒì„± ë¹„ìš©ì´ ë¹„ì‹¸ê¸° ë•Œë¬¸)</strong></p>\n<p><strong>2. ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ëŠ” ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì ‘ê·¼í•´ë„ ì•ˆì „í•˜ë‹¤.</strong></p>\n<h3>EntityManagerë€?</h3>\n<p>ì—”í‹°í‹° ë§¤ë‹ˆì €ëŠ” íŠ¹ì • ì‘ì—…ì„ ìœ„í•´ ë°ì´í„°ë² ì´ìŠ¤ì— ì•¡ì„¸ìŠ¤ í•˜ëŠ” ì—­í• ì„ í•œë‹¤.\në˜í•œ ì—”í‹°í‹°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— CRUD í•  ìˆ˜ ìˆë‹¤.\nì¦‰, ì—”í‹°í‹°ì™€ ê´€ë ¨ëœ ëª¨ë“  ì¼ì„ ì²˜ë¦¬í•˜ê¸°ì— ì´ë¦„ ê·¸ëŒ€ë¡œ ì—”í‹°í‹°ë¥¼ ê´€ë¦¬í•˜ëŠ” ê´€ë¦¬ìë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JpaMain</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">EntityManagerFactory</span> emf <span class=\"token operator\">=</span> \n        \t\t\t<span class=\"token class-name\">Persistence</span><span class=\"token punctuation\">.</span><span class=\"token function\">createEntityManagerFactory</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// íŒŒë¼ë¯¸í„°ë¡œ Persistence.xmlì— ì„¤ì •í•œ persistence-unitì˜ name ì†ì„±ê°’ì„ ë„£ëŠ”ë‹¤.</span>\n        \n        <span class=\"token class-name\">EntityManager</span> em <span class=\"token operator\">=</span> emf<span class=\"token punctuation\">.</span><span class=\"token function\">createEntityManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ìœ„ì™€ ê°™ì´ <code class=\"language-text\">EntityManagerFactory</code>ë¥¼ í†µí•´ì„œ <code class=\"language-text\">EntityManager</code>ë¥¼ ìƒì„± í•  ìˆ˜ ìˆë‹¤.</p>\n<h4>ğŸ”<code class=\"language-text\">EntityManager</code>ê°€ ê°€ì§€ëŠ” íŠ¹ì§•</h4>\n<p><strong>1. ì—”í‹°í‹° ë§¤ë‹ˆì €ëŠ” DB connectionê³¼ ë°€ì ‘í•œ ê´€ê³„ê°€ ìˆê¸° ë•Œë¬¸ì—, ìŠ¤ë ˆë“œ ê°„ì— ê³µìœ í•˜ê±°ë‚˜ ì¬ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤.</strong></p>\n<p><strong>2. ì—”í‹°í‹° ë§¤ë‹ˆì €ì˜ CRUD ì‘ì—…ì€ íŠ¸ëœì­ì…˜ ë‹¨ìœ„ë¡œ ì²˜ë¦¬ í•´ì•¼í•œë‹¤.</strong></p>\n<h4><strong>ì£¼ì˜ì â—</strong></h4>\n<p><strong>EntityManagerì˜ ì‘ì—…ì€ íŠ¸ëœì­ì…˜ ë‹¨ìœ„ë¡œ ì§„í–‰ë˜ì–´ì•¼í•œë‹¤.\nì™œëƒí•˜ë©´, CRUD ì‘ì—…ì„ ìˆ˜í–‰í•˜ë‹¤ê°€ ì¤‘ê°„ì— ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ê²½ìš° íŠ¸ëœì­ì…˜ ì´ì „ì˜ ìƒíƒœë¡œ ëŒì•„ê°€ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</strong></p>\n<p>ë§ˆì§€ë§‰ìœ¼ë¡œ ì½”ë“œë¥¼ í†µí•´ <code class=\"language-text\">EntityManagerFactory</code> ìƒì„±ë¶€í„° DBì— ì—”í‹°í‹°ì˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ê³¼ì •ì„ ì‚´í´ë³´ì.</p>\n<h3>JPAì˜ êµ¬ë™ê³¼ì •</h3>\n<p>JAVA ì½”ë“œìƒì—ì„œ <code class=\"language-text\">JPA</code>ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ DBì— ì €ì¥í•˜ëŠ” ê³¼ì •ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JpaMain</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">EntityManagerFactory</span> emf <span class=\"token operator\">=</span> \n        \t\t\t<span class=\"token class-name\">Persistence</span><span class=\"token punctuation\">.</span><span class=\"token function\">createEntityManagerFactory</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n                    <span class=\"token comment\">// ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ ìƒì„±</span>\n        <span class=\"token class-name\">EntityManager</span> em <span class=\"token operator\">=</span> emf<span class=\"token punctuation\">.</span><span class=\"token function\">createEntityManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ì—”í‹°í‹° ë§¤ë‹ˆì € ìƒì„±</span>\n        \n        <span class=\"token class-name\">EntityTransaction</span> tx <span class=\"token operator\">=</span> em<span class=\"token punctuation\">.</span><span class=\"token function\">getTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// íŠ¸ëœì­ì…˜ ìƒì„±</span>\n        tx<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// íŠ¸ëœì­ì…˜ ì‹œì‘</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        \t<span class=\"token class-name\">Member</span> member <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ë©¤ë²„ ì—”í‹°í‹° ìƒì„±</span>\n            member<span class=\"token punctuation\">.</span><span class=\"token function\">setId</span><span class=\"token punctuation\">(</span><span class=\"token number\">100L</span><span class=\"token punctuation\">)</span>\n            member<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"JPA\"</span><span class=\"token punctuation\">)</span>\n            \n            em<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span> <span class=\"token comment\">// ë©¤ë²„ ì—”í‹°í‹° ë°ì´í„°ë¥¼ ì €ì¥</span>\n        \n            tx<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// íŠ¸ëœì­ì…˜ ì»¤ë°‹</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            tx<span class=\"token punctuation\">.</span><span class=\"token function\">rollback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// íŠ¸ëœì­ì…˜ ë¡¤ë°±</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n            em<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ì—”í‹°í‹° ë§¤ë‹ˆì € ì—°ê²° ì¢…ë£Œ</span>\n        <span class=\"token punctuation\">}</span>\n        emf<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol>\n<li>Persistence.xml ì„¤ì •íŒŒì¼ì˜ Persistence Unitì„ í†µí•´ ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ë¥¼ ìƒì„±í•œë‹¤.</li>\n<li>ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ë¡œ ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ ìƒì„±í•œë‹¤. </li>\n<li>ì—”í‹°í‹° ë§¤ë‹ˆì €ì— ëŒ€í•œ íŠ¸ëœì­ì…˜ì„ ìƒì„±í•œë‹¤.</li>\n<li>íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•œë‹¤.</li>\n<li>DBì— ì €ì¥í•  ë©¤ë²„ ì—”í‹°í‹°ë¥¼ ìƒì„±í•œë‹¤.</li>\n<li>em.persist(member)ë¥¼ í†µí•´ ì—”í‹°í‹° ë°ì´í„°ë¥¼ ì €ì¥í•œë‹¤.</li>\n<li>íŠ¸ëœì­ì…˜ì„ ì»¤ë°‹í•œë‹¤.</li>\n<li>ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ ë‹«ëŠ”ë‹¤.</li>\n<li>ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ë¥¼ ë‹«ëŠ”ë‹¤.</li>\n</ol>\n<p>ìœ„ì™€ ê°™ì€ ê³¼ì •ì„ í†µí•´ DBì— ë°ì´í„°ë¥¼ ì €ì¥ í•  ìˆ˜ ìˆë‹¤.</p>\n<p><code class=\"language-text\">em.persist()</code> ë©”ì„œë“œëŠ” íŒŒë¼ë¯¸í„°ë¡œ ë“¤ì–´ì˜¨ ì—”í‹°í‹°ì— ëŒ€í•œ insert ì¿¼ë¦¬ë¬¸ì„ JPAê°€ ì‘ì„±í•˜ì—¬ DBì— ì—”í‹°í‹°ì˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë©”ì„œë“œì´ë‹¤.</p>\n<p>ì–¼í• ë³´ë©´, <code class=\"language-text\">em.persist(member)</code>ë¥¼ ì‹¤í–‰í• ë•Œ ë°ì´í„°ê°€ ë°”ë¡œ DBì— ì €ì¥ ë  ê²ƒ ê°™ë‹¤.</p>\n<p>í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” <code class=\"language-text\">Member</code> ì—”í‹°í‹°ê°€ <code class=\"language-text\">EntityManager</code>ì˜ ì˜ì† ì»¨í…ìŠ¤íŠ¸ë¼ëŠ” ê³µê°„ì— ì €ì¥ë˜ê³  íŠ¸ëœì­ì…˜ì´ ì»¤ë°‹ë˜ëŠ” ì‹œì ì— DBì— <code class=\"language-text\">Member</code> ì—”í‹°í‹°ì— ëŒ€í•œ insert ì¿¼ë¦¬ë¬¸ì´ ë‚ ë¼ê°„ë‹¤.</p>\n<p>ì™œ ë°”ë¡œ, DBì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ì§€ ì•Šê³  ì˜ì† ì»¨í…ìŠ¤íŠ¸ì— ë°ì´í„°ë¥¼ ì €ì¥í• ê¹Œ? ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œ ì•Œì•„ë³´ì.</p>","frontmatter":{"title":"JPA ì‘ë™ ë©”ì»¤ë‹ˆì¦˜","date":"July 26, 2022","update":"July 26, 2022","tags":["JPA"],"series":"JPA ì‹œë¦¬ì¦ˆ"},"fields":{"slug":"/mechanism-of-jpa/","readingTime":{"minutes":4.125}}},"seriesList":{"edges":[{"node":{"id":"0352eb77-cded-5720-a401-ed0c801feef9","fields":{"slug":"/mechanism-of-jpa/"},"frontmatter":{"title":"JPA ì‘ë™ ë©”ì»¤ë‹ˆì¦˜"}}}]},"previous":{"fields":{"slug":"/apply-rest-docs/"},"frontmatter":{"title":"MockMvcë¥¼ ì‚¬ìš©í•œ Spring RestDocs"}},"next":{"fields":{"slug":"/properties-to-object/"},"frontmatter":{"title":"properties ê°ì²´ë¡œ ë‹¤ë£¨ê¸°"}}},"pageContext":{"id":"0352eb77-cded-5720-a401-ed0c801feef9","series":"JPA ì‹œë¦¬ì¦ˆ","previousPostId":"f5b486f2-7f2e-5907-9380-8646b727011b","nextPostId":"6c7a3b90-ff64-58fd-8199-cb65a649efc4"}},"staticQueryHashes":[]}