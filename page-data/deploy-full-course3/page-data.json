{"componentChunkName":"component---src-templates-post-jsx","path":"/deploy-full-course3/","result":{"data":{"site":{"siteMetadata":{"title":"dal.log"}},"markdownRemark":{"id":"ba13f1c5-fc6b-5f19-afbc-ea2bc164b7ee","excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” ë‹¬ë¡íŒ€ í¬ë£¨ íŒŒë‘ì´ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. NGINX ì„¤ì¹˜ NGINXë€? ë‹¬ë¡ ê¸°ìˆ ë¸”ë¡œê·¸ - ë¦¬ë²„ì˜ NGINX ë€? ì„¤ì¹˜ SSL ì¸ì¦ì„œ ë°œê¸‰ (with Certbot) Letâ€™s Encrypt 90ì¼ì§œë¦¬ ë‹¨ê¸° ì¸ì¦ì„œë¥¼ ë¬´ë£Œë¡œ ë°œê¸‰í•´ì£¼ëŠ” ê³³ì…ë‹ˆë‹¤. ì£¼ê¸°ì ìœ¼ë¡œ ì¬ë°œê¸‰ í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. Snapd ì„¤ì¹˜ snapcraft ê³µì‹ë¬¸ì„œ - Installing sâ€¦","html":"<blockquote>\n<p>ì´ ê¸€ì€ ìš°í…Œì½” ë‹¬ë¡íŒ€ í¬ë£¨ <a href=\"https://github.com/summerlunaa\">íŒŒë‘</a>ì´ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.</p>\n</blockquote>\n<h2>NGINX ì„¤ì¹˜</h2>\n<h3>NGINXë€?</h3>\n<p><a href=\"https://dallog.github.io/what_is_nginx/\">ë‹¬ë¡ ê¸°ìˆ ë¸”ë¡œê·¸ - ë¦¬ë²„ì˜ NGINX ë€?</a></p>\n<h3>ì„¤ì¹˜</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update <span class=\"token comment\"># ìš´ì˜ì²´ì œì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ íŒ¨í‚¤ì§€ë“¤ê³¼ ê·¸ ë²„ì „ì— ëŒ€í•œ ì •ë³´(ë¦¬ìŠ¤íŠ¸) ì—…ë°ì´íŠ¸ </span>\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> nginx -y <span class=\"token comment\"># nginx ì„¤ì¹˜</span>\n$ nginx -v <span class=\"token comment\"># ì„¤ì¹˜í•œ nginx ë²„ì „ í™•ì¸</span>\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">service</span> nginx status <span class=\"token comment\"># nginx ìƒíƒœ í™•ì¸</span></code></pre></div>\n<h2>SSL ì¸ì¦ì„œ ë°œê¸‰ (with Certbot)</h2>\n<h3>Letâ€™s Encrypt</h3>\n<p>90ì¼ì§œë¦¬ ë‹¨ê¸° ì¸ì¦ì„œë¥¼ ë¬´ë£Œë¡œ ë°œê¸‰í•´ì£¼ëŠ” ê³³ì…ë‹ˆë‹¤. ì£¼ê¸°ì ìœ¼ë¡œ ì¬ë°œê¸‰ í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.</p>\n<h3>Snapd ì„¤ì¹˜</h3>\n<p><a href=\"https://snapcraft.io/docs/installing-snap-on-ubuntu\">snapcraft ê³µì‹ë¬¸ì„œ - Installing snap on Ubuntu</a></p>\n<p>certbotì€ snapdë¡œ certbotì„ ì„¤ì¹˜í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë¦¬ëˆ…ìŠ¤ í†µí•© íŒ¨í‚¤ì§€ ê´€ë¦¬ íˆ´ì¸ snapdë¥¼ ë¨¼ì € ì„¤ì¹˜í•´ë´…ì‹œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> snapd</code></pre></div>\n<h3>Certbot ì„¤ì¹˜</h3>\n<p><a href=\"https://certbot.eff.org/instructions?ws=apache&#x26;os=centosrhel7\">certbot ê³µì‹ ë¬¸ì„œ - certbot ì„¤ì¹˜</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> snap <span class=\"token function\">install</span> core<span class=\"token punctuation\">;</span> \n$ <span class=\"token function\">sudo</span> snap <span class=\"token function\">install</span> --classic certbot <span class=\"token comment\"># certbot ì„¤ì¹˜</span>\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">ln</span> -s /snap/bin/certbot /usr/bin/certbot <span class=\"token comment\"># certbot ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì‹¬ë³¼ë¦­ë§í¬ ê±¸ê¸°</span>\n$ certbot --version <span class=\"token comment\"># ë²„ì „ í™•ì¸</span></code></pre></div>\n<h3>SSL ì¸ì¦ì„œ ë°œê¸‰ ë°©ë²•</h3>\n<p><a href=\"https://eff-certbot.readthedocs.io/en/stable/using.html#apache\">certbot ê³µì‹ ë¬¸ì„œ - ì¸ì¦ì„œ ë°œê¸‰ ë°©ë²•</a></p>\n<p>Certbotì„ í†µí•´ SSL ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ëŠ” ë°©ë²•ì€ ì—¬ëŸ¬ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤. ê·¸ ì¤‘ ëª‡ ê°€ì§€ë¥¼ ê°„ë‹¨í•˜ê²Œ ì‚´í´ë³¼ê²Œìš”. ë‹¬ë¡ì€ Nginx ë°©ë²•ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>\n<p><strong><code class=\"language-text\">Nginx</code></strong> (ìš°ë¦¬ê°€ ì‚¬ìš©í•œ ë°©ë²•)</p>\n<ul>\n<li>ì¸ì¦ ë° ì„¤ì¹˜ë¥¼ ìœ„í•´ nginx í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•œë‹¤. nginxì— ëŒ€í•œ ì¸ì¦ì„œ ì·¨ë“ ë° ì„¤ì¹˜ê°€ ìë™ì ìœ¼ë¡œ ì´ë£¨ì–´ì§„ë‹¤.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">Webroot</code></p>\n<ul>\n<li>ê¸°ëŠ¥ì´ ë™ì‘í•˜ê³  ìˆëŠ” ë¡œì»¬ ì›¹ ì„œë²„ë¥¼ ì‹¤í–‰ ì¤‘ì´ë¼ë©´ ì›¹ ì„œë²„ë¥¼ ì¤‘ì§€í•˜ë©´ ì•ˆ ë˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤. ê·¸ëŸ° ê²½ìš° webroot ë°©ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>\n<li>ì›¹ì˜ ë””ë ‰í† ë¦¬ ë‚´ì— ì¸ì¦ì„œì˜ ìœ íš¨ì„±ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì„ì‹œ íŒŒì¼ì„ ë§Œë“¤ì–´ ì¸ì¦ì„ ì§„í–‰í•œë‹¤.</li>\n<li>í•œ ë²ˆì— í•˜ë‚˜ì˜ ë„ë©”ì¸ë§Œ ë°œê¸‰ ê°€ëŠ¥í•˜ë‹¤.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">Standalone</code></p>\n<ul>\n<li>ì¸ì¦ì„œ ë°œê¸‰ì„ ìœ„í•´ ê¸°ì¡´ì˜ ì›¹ ì„œë²„ë¥¼ ì¤‘ì§€í•´ì•¼ í•œë‹¤.</li>\n<li>ì¸ì¦ì„ ìœ„í•´ 80 í¬íŠ¸ë¡œ ê°€ìƒì˜ standalone ì›¹ì„œë²„ë¥¼ ë„ì›Œ ì¸ì¦ì„œë¥¼ ë°œê¸‰í•œë‹¤.</li>\n<li>í•œ ë²ˆì— ì—¬ëŸ¬ ë„ë©”ì¸ì„ ë°œê¸‰í•  ìˆ˜ ìˆë‹¤.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">Manual</code></p>\n<ul>\n<li>ë„ë©”ì¸ì˜ ìœ íš¨ì„± ê²€ì¦ì„ ì§ì ‘ ìˆ˜í–‰í•˜ëŠ” ê²½ìš° ì‚¬ìš©í•œë‹¤.</li>\n<li>ë””ë ‰í† ë¦¬ì— íŠ¹ì • ì´ë¦„ê³¼ íŠ¹ì • ë‚´ìš©ì„ ê°€ì§„ ì„ì‹œ íŒŒì¼ì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤. webroot ë°©ì‹ê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ ìë™ìœ¼ë¡œ ì§„í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.</li>\n<li>\n<p>ë„ë©”ì¸ì— <code class=\"language-text\">_acme-challenge</code> ë¥¼ ë¶™ì¸ TXT DNS ë ˆì½”ë“œë¥¼ ì„¤ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ì˜ˆì‹œ</span>\n_acme-challenge.example.com. <span class=\"token number\">300</span> IN TXT <span class=\"token string\">\"gfj9Xq...Rg85nM\"</span></code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<h3>ì¸ì¦ì„œ ë°œê¸‰í•˜ê¸°</h3>\n<p>ê·¸ëŸ¼ ì´ì œ Nginx ë°©ë²•ì„ ì‚¬ìš©í•´ì„œ ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ì•„ ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> certbot certonly --nginx -d <span class=\"token punctuation\">{</span>ë„ë©”ì¸ ì´ë¦„<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p><code class=\"language-text\">certonly</code></p>\n<ul>\n<li>ìë™ìœ¼ë¡œ nginx ì„¤ì •ì„ ìˆ˜ì •í•˜ì§€ ì•Šê³  ì¸ì¦ì„œë§Œ ë°œê¸‰ë°›ëŠ” ì˜µì…¥ì…ë‹ˆë‹¤. ìë™ìœ¼ë¡œ ì–´ë–»ê²Œ ì„¤ì •ë˜ëŠ”ì§€ í™•ì‹¤íˆ ì•Œì§€ ëª»í•˜ëŠ” ê²½ìš°ì—” certonlyë¡œ ë°›ëŠ” ê²ƒì´ ë‚˜ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">â€”-nginx</code></p>\n<ul>\n<li>nginx ë°©ì‹ì„ í™œìš©í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.</li>\n</ul>\n</li>\n</ul>\n<h3>Nginx ì„¤ì •</h3>\n<p>ì´ì œ nginx ì„¤ì •ì„ ìœ„í•´ì„œ ì„¤ì • íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤. <code class=\"language-text\">/etc/nginx/conf.d</code> ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•˜ì—¬ <code class=\"language-text\">default.conf</code> íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤. ê¼­ sudoë¡œ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> /etc/nginx/conf.d\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">vim</span> default.conf</code></pre></div>\n<blockquote>\n<p>âš ï¸ ì£¼ì˜: <code class=\"language-text\">sites-available</code> ê³¼ <code class=\"language-text\">sites-enabled</code> ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” nginx ì„¤ì • ë°©ë²•ì…ë‹ˆë‹¤.</p>\n</blockquote>\n<p><code class=\"language-text\">sites-available</code> ê³¼ <code class=\"language-text\">sites-enabled</code> ë‘ ë””ë ‰í† ë¦¬ëŠ” sym linkë¡œ ì—°ê²°ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ê¸°ì¡´ ë°©ì‹ì€ <code class=\"language-text\">sites-available</code>ì— ì—¬ëŸ¬ ì„¤ì •íŒŒì¼ë“¤ì„ ë•Œë ¤ ë°•ì€ ë‹¤ìŒì— <code class=\"language-text\">sites-enabled</code>ì— ì›í•˜ëŠ” ì„¤ì •ì„ ì„ íƒì ìœ¼ë¡œ ë™ê¸°í™”í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì´ëŠ” ë¹„íš¨ìœ¨ì ì¸ ë°©ë²•ì´ë¯€ë¡œ ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•©ë‹ˆë‹¤.</p>\n<p><strong>ë”°ë¼ì„œ <code class=\"language-text\">sites-available</code> ì— ê¸°ë³¸ ì„¤ì • íŒŒì¼ì´ ìˆë‹¤ë©´ ì œê±°í•´ì¤ì‹œë‹¤.</strong></p>\n<br>\n<p><code class=\"language-text\">default.conf</code> íŒŒì¼ì„ ìƒì„±í–ˆë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ë‚´ìš©ì„ ì ì–´ì¤ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># dallog-frontend /etc/nginx/conf.d/default.conf</span>\n\n<span class=\"token comment\"># 80 í¬íŠ¸ë¡œ ìš”ì²­ì´ ì˜¤ëŠ” ê²½ìš° httpsê°€ ì ìš©ëœ urlë¡œ redirect í•œë‹¤.</span>\nserver <span class=\"token punctuation\">{</span>\n  listen <span class=\"token number\">80</span><span class=\"token punctuation\">;</span>\n  server_name dallog.me<span class=\"token punctuation\">;</span>\n\n  <span class=\"token builtin class-name\">return</span> <span class=\"token number\">301</span> https://dallog.me<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\"># 443 í¬íŠ¸ë¡œ ìš”ì²­ì´ ì˜¤ëŠ” ê²½ìš°</span>\nserver <span class=\"token punctuation\">{</span>\n  listen <span class=\"token number\">443</span> ssl http2<span class=\"token punctuation\">;</span>\n  server_name dallog.me<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\"># SSL ì¸ì¦ì„ ìœ„í•œ pem key ìœ„ì¹˜ë¥¼ ì„¤ì •í•œë‹¤.</span>\n  ssl_certificate /etc/letsencrypt/live/dallog.me/fullchain.pem<span class=\"token punctuation\">;</span>\n  ssl_certificate_key /etc/letsencrypt/live/dallog.me/privkey.pem<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\"># frontì˜ ê²½ìš° ì •ì  í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ index.html ìœ„ì¹˜ë¥¼ ì„¤ì •í•œë‹¤.</span>\n  location / <span class=\"token punctuation\">{</span>\n    root /usr/share/nginx/html<span class=\"token punctuation\">;</span>\n    index index.html<span class=\"token punctuation\">;</span>\n    try_files <span class=\"token variable\">$uri</span> <span class=\"token variable\">$uri</span>/ /index.html<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># dallog-ws /etc/nginx/conf.d/default.conf</span>\n\nserver <span class=\"token punctuation\">{</span>\n  listen <span class=\"token number\">80</span><span class=\"token punctuation\">;</span>\n  server_name api.dallog.me<span class=\"token punctuation\">;</span>\n\n  <span class=\"token builtin class-name\">return</span> <span class=\"token number\">301</span> https://api.dallog.me<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nserver <span class=\"token punctuation\">{</span>\n  listen <span class=\"token number\">443</span> ssl http2<span class=\"token punctuation\">;</span>\n  server_name api.dallog.me<span class=\"token punctuation\">;</span>\n\n  ssl_certificate /etc/letsencrypt/live/api.dallog.me/fullchain.pem<span class=\"token punctuation\">;</span>\n  ssl_certificate_key /etc/letsencrypt/live/api.dallog.me/privkey.pem<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\"># web serverì˜ ê²½ìš° ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ ìœ„í•œ proxy ì„¤ì •ì´ ë“¤ì–´ê°„ë‹¤.</span>\n  location / <span class=\"token punctuation\">{</span>\n    proxy_pass http://<span class=\"token punctuation\">{</span>backend-prod server ip<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token comment\"># backend-prod server ip</span>\n    proxy_set_header Host <span class=\"token variable\">$http_host</span><span class=\"token punctuation\">;</span>\n    proxy_set_header X-Real-IP <span class=\"token variable\">$remote_addr</span><span class=\"token punctuation\">;</span>\n    proxy_set_header X-Forwarded-For <span class=\"token variable\">$proxy_add_x_forwarded_for</span><span class=\"token punctuation\">;</span>\n    proxy_set_header X-Forwarded-Proto <span class=\"token variable\">$scheme</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">proxy_pass</code> : í”„ë¡ì‹œ ì£¼ì†Œ, ë°±ì—”ë“œ ìš´ì˜ ì„œë²„ ipë¥¼ ë„£ì–´ì¤€ë‹¤.</li>\n<li><code class=\"language-text\">proxy_set_header Host $http_host</code> : HTTP Requestì˜ Host í—¤ë” ê°’, í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•œ ì›ë˜ í˜¸ìŠ¤íŠ¸ ì£¼ì†Œ</li>\n<li><code class=\"language-text\">X-Real-IP $remote_addr</code>: ì‹¤ì œ ë°©ë¬¸ìì˜ ì›ê²© ip ì£¼ì†Œ</li>\n<li><code class=\"language-text\">X-Forwarded-For $proxy_add_x_forwared_for</code> : í´ë¼ì´ì–¸íŠ¸ê°€ í”„ë¡ì‹œ ì²˜ë¦¬í•œ ëª¨ë“  ì„œë²„ì˜ IP ì£¼ì†Œë¥¼ í¬í•¨í•˜ëŠ” ëª©ë¡</li>\n<li><code class=\"language-text\">X-forwarded-Proto $scheme</code> : HTTPì˜ êµ¬ì¡°ë¡œ http or httpsë¥¼ ì˜ë¯¸í•œë‹¤. HTTPS ì„œë²„ ë¸”ë¡ ë‚´ì—ì„œ ì‚¬ìš©í•  ê²½ìš° í”„ë¡ì‹œ ì„œë²„ì˜ HTTP ì‘ë‹µì´ HTTPSë¡œ ë³€í™˜ëœë‹¤.</li>\n</ul>\n<h3>Nginx ì„¤ì • ì´í›„ ì¬ì‹œì‘</h3>\n<p>ì„¤ì •ì„ ëëƒˆë‹¤ë©´ ì ìš©ì„ ìœ„í•´ Nginxë¥¼ ì¬ì‹œì‘ í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># nginx ì¬ì‹œì‘, ë‘˜ ì¤‘ í•˜ë‚˜ ì„ íƒ</span>\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">service</span> nginx reload\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">service</span> nginx restart</code></pre></div>\n<h2>ì¸ì¦ì„œ ë°œê¸‰ ì‹œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì—ëŸ¬</h2>\n<p>ì¸ì¦ì„œ ë°œê¸‰ ì‹œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì—ëŸ¬ë“¤ì„ ì•Œì•„ë´…ì‹œë‹¤. ì•„ë˜ ë‘ ê°€ì§€ ì—ëŸ¬ëŠ” ì‹¤ì œë¡œ ë‹¬ë¡ì´ SSL ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ëŠ” ê³¼ì •ì—ì„œ ê²ªì€ ì—ëŸ¬ì…ë‹ˆë‹¤.</p>\n<h3>1. too many failed authorizations recently</h3>\n<p><a href=\"https://letsencrypt.org/docs/failed-validation-limit/\">Let's encrypt ê³µì‹ ë¬¸ì„œ - failed validation limit</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> certbot certonly --nginx -d api.dallog.me\n\nSaving debug log to /var/log/letsencrypt/letsencrypt.log\nRequesting a certificate <span class=\"token keyword\">for</span> api.dallog.me\nAn unexpected error occurred:\nError creating new order :: too many failed authorizations recently: see https://letsencrypt.org/docs/failed-validation-limit/\nAsk <span class=\"token keyword\">for</span> <span class=\"token builtin class-name\">help</span> or search <span class=\"token keyword\">for</span> solutions at https://community.letsencrypt.org. See the logfile /var/log/letsencrypt/letsencrypt.log or re-run Certbot with -v <span class=\"token keyword\">for</span> <span class=\"token function\">more</span> details.</code></pre></div>\n<p>ì´ ì˜¤ë¥˜ëŠ” ê³„ì •, í˜¸ìŠ¤íŠ¸ ë„¤ì„, ì‹œê°„ë‹¹ 5ë²ˆì˜ ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨ì‹œ ë°œìƒí•©ë‹ˆë‹¤. ëª‡ ì‹œê°„(3-4ì‹œê°„ ì •ë„) ê¸°ë‹¤ë¦¬ë©´ ì œí•œì´ í’€ë¦½ë‹ˆë‹¤. ê·¸ ë•Œ ë‹¤ì‹œ ì‹œë„í•˜ë©´ ë©ë‹ˆë‹¤.</p>\n<h3>2. too many certificates</h3>\n<p><a href=\"https://letsencrypt.org/docs/duplicate-certificate-limit/\">Let's encrypt ê³µì‹ ë¬¸ì„œ - duplicate certificate limit</a></p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/35e6869a39f68ee5c9daceb01252b1b0/f28c3/error.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 19.411764705882355%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAz0lEQVQY01WQW26DMBBFWUaoQiUamgqKbWzzKgQoLeSpdP+7ublY5KMfR2fsGY899vLrDdl8hpqOSMcZyXCD+PmDGO9I+zNEf4TsT4ibX0RFh9C0eMsPjn014DWrsfm08NMcPu3ZeoSuvqHKAZKoskdM9mWHQBSOLYsX/MT8YxNr5xc2CtYaT+sapWlg9JdD8UZJSzqjNXO5bZ0LesGsWL7SEM1YMB/xjKc4juRYah1NHCak7eS87IludvFzbccLPjjqjk0iNnvnNyxxyDikH7GZgDUmjHZuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='error' title='error' src='/static/35e6869a39f68ee5c9daceb01252b1b0/ca1dc/error.png' srcset='/static/35e6869a39f68ee5c9daceb01252b1b0/e7570/error.png 170w,\n/static/35e6869a39f68ee5c9daceb01252b1b0/f46e7/error.png 340w,\n/static/35e6869a39f68ee5c9daceb01252b1b0/ca1dc/error.png 680w,\n/static/35e6869a39f68ee5c9daceb01252b1b0/02d09/error.png 1020w,\n/static/35e6869a39f68ee5c9daceb01252b1b0/9d567/error.png 1360w,\n/static/35e6869a39f68ee5c9daceb01252b1b0/f28c3/error.png 1424w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>ë¬¸ì œëŠ” ì´ ë‘ ë²ˆì§¸ ì—ëŸ¬ì…ë‹ˆë‹¤. ì´ ì˜¤ë¥˜ëŠ” ì£¼ë‹¹ 5ë²ˆì´ë¼ëŠ” ì¸ì¦ì„œ ë°œê¸‰ íšŸìˆ˜ ì œí•œì„ ë„˜ê¸´ ê²½ìš° ë°œìƒí•©ë‹ˆë‹¤. ì´ ê²½ìš° ì¼ì£¼ì¸ê°„ ì¸ì¦ì„œ ë°œê¸‰ì´ ì œí•œë©ë‹ˆë‹¤(â€¦ğŸ¥²). ì´ ì˜¤ë¥˜ë¥¼ í”¼í•˜ê¸° ìœ„í•´ì„œëŠ” ì¸ì¦ì„œë¥¼ ì¬ë°œê¸‰ ë°›ëŠ” ëŒ€ì‹  pem keyë¥¼ ë³µì‚¬í•´ì„œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. <strong>ì¬ë°œê¸‰ì€ ì‹ ì¤‘íˆ ë°›ë„ë¡ í•©ì‹œë‹¤.</strong></p>\n<h2>ê¸°íƒ€ ì¸ì¦ì„œ ê´€ë ¨ ëª…ë ¹ì–´</h2>\n<h3>ì¸ì¦ì„œ ìë™ ê°±ì‹ </h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> certbot renew --dry-run</code></pre></div>\n<h3>ì¸ì¦ì„œ ì‚­ì œ</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ certbot delete --cert-name <span class=\"token punctuation\">{</span>ì¸ì¦ì„œ ì´ë¦„<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n \n#### reference\n<p><a href=\"https://hudi.blog/https-with-nginx-and-lets-encrypt/\">í›„ë”” ë¸”ë¡œê·¸ - Nginxì™€ Let's Encryptë¡œ HTTPS ì›¹ ì„œë¹„ìŠ¤ ë°°í¬í•˜ê¸° (feat. Certbot)</a>\n<a href=\"https://velog.io/@jihyunhillpark/2.-spring-boot-%EA%B8%B0%EB%B0%98-%EC%95%B1-%EB%B0%B0%ED%8F%AC-Cerbot-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EB%B0%9C%EA%B8%89%EA%B3%BC-SSL-%EC%A0%81%EC%9A%A9\">2. Nginx ì„¤ì¹˜ ë¶€í„° spring boot ê¸°ë°˜ ì•± ë°°í¬ - Cerbot ì¸ì¦ì„œ ë°œê¸‰ê³¼ SSL ì ìš©</a>\n<a href=\"https://blog.naver.com/PostView.naver?blogId=kangdydtjs&#x26;logNo=222546308110&#x26;from=search&#x26;redirect=Log&#x26;widgetTypeCall=true&#x26;directAccess=false\">4. SSL ì¸ì¦ì„œ(letsencrypt) ë°œê¸‰</a></p>\n<h4>Special Thanks To <code class=\"language-text\">ìŠ¹íŒ¡</code></h4>","frontmatter":{"title":"ë‹¬ë¡ ë°°í¬ ì´ğŸ”«ì •ë¦¬ 3 - SSL ì¸ì¦ì„œ ë°œê¸‰ê³¼ NGINX ì„¤ì •","date":"August 08, 2022","update":"August 08, 2022","tags":["deploy","DevOps"],"series":"ë‹¬ë¡ ë°°í¬ ì´ğŸ”«ì •ë¦¬"},"fields":{"slug":"/deploy-full-course3/","readingTime":{"minutes":9.3}}},"seriesList":{"edges":[{"node":{"id":"5a96e346-8893-537d-b35c-811304ffa4ce","fields":{"slug":"/deploy-full-course1/"},"frontmatter":{"title":"ë‹¬ë¡ ë°°í¬ ì´ğŸ”«ì •ë¦¬ 1 - ì „ì²´ì ì¸ êµ¬ì¡° ì‚´í´ë³´ê¸°"}}},{"node":{"id":"8bc0402c-3e53-5b2f-8b5d-155b47d70fae","fields":{"slug":"/deploy-full-course2/"},"frontmatter":{"title":"ë‹¬ë¡ ë°°í¬ ì´ğŸ”«ì •ë¦¬ 2 - EC2ì™€ DNS ì„¤ì •í•˜ê¸°"}}},{"node":{"id":"ba13f1c5-fc6b-5f19-afbc-ea2bc164b7ee","fields":{"slug":"/deploy-full-course3/"},"frontmatter":{"title":"ë‹¬ë¡ ë°°í¬ ì´ğŸ”«ì •ë¦¬ 3 - SSL ì¸ì¦ì„œ ë°œê¸‰ê³¼ NGINX ì„¤ì •"}}}]},"previous":{"fields":{"slug":"/deploy-full-course2/"},"frontmatter":{"title":"ë‹¬ë¡ ë°°í¬ ì´ğŸ”«ì •ë¦¬ 2 - EC2ì™€ DNS ì„¤ì •í•˜ê¸°"}},"next":null},"pageContext":{"id":"ba13f1c5-fc6b-5f19-afbc-ea2bc164b7ee","series":"ë‹¬ë¡ ë°°í¬ ì´ğŸ”«ì •ë¦¬","previousPostId":"8bc0402c-3e53-5b2f-8b5d-155b47d70fae","nextPostId":null}},"staticQueryHashes":[]}